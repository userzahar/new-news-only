{"mappings":"qLAGA,IAAIA,E,+SCHJC,EAAA,SDCAA,EAAA,SAGA,IAAIC,EAASC,aAAaC,QAAQ,aAEhCJ,EADEE,EACSG,KAAKC,MAAMJ,GACN,G,2CEFe,eAA7BK,OAAOC,SAASC,WAClBF,OAAOG,iBAAiB,oBAAoBC,IAAS,EAAAC,EAAAC,eACrDN,OAAOG,iBAAiB,oBAAoBC,GAY9C,SAAmBG,GAGjB,MAAMC,EADOC,EAAaC,OAAOC,GAE9BC,KAAIC,GACI,+DAA+DA,EAAGC,0DAA0DD,EAAGC,gNAIvIC,KAAK,IACRC,EAAAC,KAAKC,kBAAkBC,mBAAmB,YAAaX,GACvDY,UAAYC,SAASC,iBAAiB,WAKfC,EAJPhB,EAKhBa,UAAUI,SAAQ,CAACC,EAAWC,KAC5B,MAAMC,EAAYJ,EACfX,KAAIC,IACH,GAAIY,EAAUG,YAAcf,EAAGgB,SAC7B,MAAO,kKAGgChB,EAAGiB,aAAajB,EAAGkB,uOAGAC,EAAAC,sOAGSD,EAAAC,2KAI3BpB,EAAGqB,6DACNrB,EAAGsB,8HAEItB,EAAGgB,qDACtBhB,EAAGuB,iKAGnB,IAGZrB,KAAK,IACRK,UAAUM,GAAcW,iBAAiBlB,mBACvC,YACAQ,EACD,KAlCH,EAAAtB,EAAAC,aAEF,IAAyBiB,C,CA5B8Be,CAAU7C,KAEvC,IAApBA,EAAS8C,SACXvB,EAAAC,KAAKC,kBAAkBsB,UAAUC,IAAI,iCACpCzB,EAAAC,KAAKyB,UAAUF,UAAUG,OAAO,yBAIrC,MAAMlC,EAAehB,EAASmB,KAAIgC,GAAiBA,EAAcf,WACjE,SAASlB,EAAWkC,EAAOC,EAAOC,GAChC,OAAOtC,EAAauC,QAAQH,KAAWC,C,CAqEzC,GAAiC,eAA7B9C,OAAOC,SAASC,SAA2B,CAC7Cc,EAAAC,KAAKC,kBAAkBf,iBAAiB,SACxC,SAAyBC,GACvB,GAA8B,SAA1BA,EAAM6C,OAAOC,SACf,OAEF9C,EAAM6C,OAAOT,UAAUW,OAAO,uBAC9B/C,EAAM6C,OAAOG,mBAAmBZ,UAAUW,OAAO,sB","sources":["src/js/functions/saveToLocalStorage.js","src/read.js","src/js/js-read/addToRead.js"],"sourcesContent":["\nimport { refs } from '../refs';\n\nlet readNews;\nlet fromLS = localStorage.getItem('read-news');\nif (fromLS) {\n  readNews = JSON.parse(fromLS);\n} else readNews = [];\nexport { readNews };\n\n\n\n\nexport function toLS(e) {\n  // console.log('lols', e.target.className);\n  if (e.target.className !== 'gallery__link') {\n    return;\n  }\n\n\n  const readObj = {\n    alt: e.target.parentNode.parentNode.childNodes[1].children[1].alt,\n    header: e.target.parentNode.parentNode.childNodes[3].textContent,\n    src: e.target.parentNode.parentNode.childNodes[1].children[1].src,\n    text: e.target.parentNode.parentNode.childNodes[5].textContent,\n    link: e.target.href,\n    readDate: getUserTime(),\n  };\n\n  // console.log('readObj', readObj);\n  checkIfSaved(readObj);\n  readNews.push(readObj);\n  // console.log('readNews after push', readNews);\n  const LSReadNewsJSON = JSON.stringify(readNews);\n\n  localStorage.setItem('read-news', LSReadNewsJSON);\n\n  function getUserTime(t = new Date()) {\n    let Y = t.getFullYear();\n    let M = addLeadingZero(t.getMonth() + 1);\n    let D = addLeadingZero(t.getDate());\n    return `${D}/${M}/${Y}`;\n  }\n  function addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n  }\n\n  function checkIfSaved(readObj) {\n    readNews.map((el, currentIndex) => {\n      if (readObj.src === el.src) {\n        return readNews.splice(currentIndex, 1);\n      }\n      return;\n    });\n  }\n}\n","import './js/js-header/nav-current';\nimport './js/js-read/addToRead';","\nimport { readNews } from '../functions/saveToLocalStorage';\nimport { mqHandler } from '../functions/mqHandler';\nimport { refs } from '../refs';\nimport { ICON_HEART } from '../functions/markup';\nif (window.location.pathname === '/read.html') {\n  window.addEventListener('DOMContentLoaded', event => mqHandler());\n  window.addEventListener('DOMContentLoaded', event => createDiv(readNews));\n  // refs.errorFind.classList.remove('notfind-part-hidden');\n  if (readNews.length === 0) {\n    refs.readNewsContainer.classList.add('read__news__container__hidden');\n     refs.errorFind.classList.remove('notfind-part-hidden');\n  }\n}\n//  refs.errorFind.classList.remove('notfind-part-hidden');\nconst readingDates = readNews.map(singleArticle => singleArticle.readDate);\nfunction onlyUnique(value, index, array) {\n  return readingDates.indexOf(value) === index;\n}\nfunction createDiv(readNews) {\n  // refs.errorFind.classList.add('notfind-part-hidden');\n  let unique = readingDates.filter(onlyUnique);\n  const divMarkup = unique\n    .map(el => {\n      return `<div class = \"accordion__container accord parent__box dated=${el.toString()}\"><p class = \"accordion__label accord__date\">${el.toString()}</p><svg class=\"arrow__icon\" width=\"15\" height=\"9\">\n  <use href=\"./images/sprite.svg#icon-arrow-up\"></use>\n</svg><ul class = \"accordion__content gallery__list read__gallery__list\"></ul></div>`;\n    })\n    .join('');\n  refs.readNewsContainer.insertAdjacentHTML('beforeend', divMarkup);\n  accordeon = document.querySelectorAll('.accord');\n  createDailyList(readNews);\n  // createMarkupElems();\n  mqHandler();\n}\nfunction createDailyList(readNewsArray) {\n  accordeon.forEach((singleDay, currentIndex) => {\n    const dayMarkup = readNewsArray\n      .map(el => {\n        if (singleDay.innerText === el.readDate) {\n          return `<li class=\"gallery__item\">\n    <article class=\"gallery__article\">\n              <div class=\"gallery__thumb\">\n                <img class=\"gallery__img\" src=\"${el.src}\" alt=\"${el.alt}\"/>\n                       <button type=\"button\" class=\"gallery__favorite__btn \">\n                         <span class=\"favorite__btn-span\">Add to favorite\n                           <svg width='16' height='16'><use href=\"${ICON_HEART}\"></use>\n                    </svg> </span>\n                    <span class=\"favorite__btn-span remove-btn is-hidden\">Remove from favorite\n                                    <svg width='16' height='16'><use href=\"${ICON_HEART}\"></use>\n                    </svg></span>\n                          </button>\n                    </div>\n                    <h3 class=\"gallery__header\">${el.header}</h3>\n                    <p class=\"gallery__text\">${el.text}</p>\n                    <div class=\"gallery__item-bottom_wrap\">\n                        <span class=\"gallery__date\">${el.readDate}</span>\n                        <a href=\"${el.link}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"gallery__link\">Read more</a>\n                    </div>\n                </article>\n             </li>`;\n        }\n      })\n      .join('');\n    accordeon[currentIndex].lastElementChild.insertAdjacentHTML(\n      'beforeend',\n      dayMarkup\n    );\n  });\n}\nfunction checks(el) {\n  for (let i = 0; i < el; i++) {\n    console.log(\n      refs.readNewsContainer.children[i].children[1].childElementCount\n    );\n    let childCounter =\n      refs.readNewsContainer.children[i].children[1].childElementCount;\n    if (childCounter < 3) {\n      lessArr = refs.readNewsContainer.children[i].children[1].children;\n      console.log('lessArr', lessArr);\n      for (const el of lessArr) {\n        el.classList.add('less3');\n      }\n    }\n  }\n}\nif (window.location.pathname === '/read.html') {\n  refs.readNewsContainer.addEventListener('click', openNewsGallery);\n  function openNewsGallery(event) {\n    if (event.target.nodeName !== 'SPAN') {\n      return;\n    }\n    event.target.classList.toggle('title__date__rotate');\n    event.target.nextElementSibling.classList.toggle('gallery__list__open');\n  }\n}"],"names":["$a92f88b4888dea1c$export$14b32dea43b55e29","parcelRequire","$a92f88b4888dea1c$var$fromLS","localStorage","getItem","JSON","parse","window","location","pathname","addEventListener","event","$23aE7","mqHandler","readNews1","divMarkup","$529b006b9ce8d5cf$var$readingDates","filter","$529b006b9ce8d5cf$var$onlyUnique","map","el","toString","join","$krGWQ","refs","readNewsContainer","insertAdjacentHTML","accordeon","document","querySelectorAll","readNewsArray","forEach","singleDay","currentIndex","dayMarkup","innerText","readDate","src","alt","$gta3E","ICON_HEART","header","text","link","lastElementChild","$529b006b9ce8d5cf$var$createDiv","length","classList","add","errorFind","remove","singleArticle","value","index","array","indexOf","target","nodeName","toggle","nextElementSibling"],"version":3,"file":"read.788b0555.js.map"}