{"mappings":"oeACA,IAAAA,EAAAC,EAAA,S,0EAmBA,GAdAC,OAAOC,iBAAiB,oBAAoBC,IAAS,EAAAJ,EAAAK,eAYrDC,EAAAC,KAAKC,UAAUC,UAAUC,OAAO,uBAEC,mBAA7BR,OAAOS,SAASC,SAA+B,CACjD,SAASC,EAAgBC,EAASC,GAChCT,EAAAC,KAAKC,UAAUC,UAAUO,IAAI,uBAC7BF,EAAQG,mBAAmB,YAAaF,E,CAG1C,SAASG,GAAgBC,MACvBA,EAAKC,IACLA,EAAGC,YACHA,EAAWC,OACXA,EAAMC,SACNA,EAAQC,KACRA,IAEA,MAAO,+IAE+DD,yDACzBH,u2CAYCD,wDACHE,2HAEOG,8CACnBF,8J,CAMjCG,EAAAC,wBAAwBC,KAAIC,IAC1Bf,EAAgBY,EAAAI,oBAAqBX,EAAgBU,GAAI;;AAI1B,mBAA7B1B,OAAOS,SAASC,UAClBa,EAAAI,oBAAoB1B,iBAAiB,SASvC,SAA6B2B,GAC3B,MAAMC,EAAYD,EAAEE,OAAOC,QAAQ,wBAC7BC,EAASH,EAAUI,WAAWC,WAAW,GAC/CC,QAAQC,MAER,MAAMnB,EACJY,EAAUI,WAAWA,WAAWA,WAAWC,WAAW,GAAGG,YAE3D,IAAKR,EAAW,OAChB,IAAKN,EAAAC,wBAAyB,OAEzBK,EAAUtB,UAAU+B,SAAS,eAChCT,EAAUtB,UAAUO,IAAI,aACxBkB,EAAOzB,UAAUC,OAAO,cAG1B,MAAM+B,EAAsBhB,EAAAC,wBAAwBgB,WAClDC,GAAKA,EAAExB,QAAUA,IAGnBkB,QAAQC,IAAInB,EAAOsB,GAGnBhB,EAAAC,wBAAwBkB,OAAOH,EAAqB,GAEpDI,aAAaC,QACX,gBACAC,KAAKC,UAAUvB,EAAAC,0BAGjBD,EAAAI,oBAAoBoB,UAAY,GAChC3C,EAAAC,KAAKC,UAAUC,UAAUC,OAAO,uBAEhCe,EAAAC,wBAAwBC,KAAIC,IAC1Bf,EAAgBY,EAAAI,oBAAqBX,EAAgBU,GAAI,G,IAxC7DS,QAAQC,IAAIb,EAAAC,yBAEoB,OAA5BD,EAAAC,yBAAoCD,EAAAC,0BAA4B,IAClEW,QAAQC,IAAI,Q","sources":["src/favorite.js"],"sourcesContent":["// import './js/functions/mqHandler';\nimport { mqHandler } from './js/functions/mqHandler';\nimport './js/js-header/dark-mode';\nimport './js/js-header/mobile-menu';\nimport './js/js-header/nav-current';\n\nwindow.addEventListener('DOMContentLoaded', event => mqHandler());\n\nimport { ICON_HEART } from './js/functions/markup';\n\nimport { refs } from './js/refs';\nimport {\n  favoritesInLocalStorage,\n  favoriteGalleryList,\n} from './js/localStorageFavorite';\n\n// console.log(favoritesInLocalStorage);\n\nrefs.errorFind.classList.remove('notfind-part-hidden');\n\nif (window.location.pathname === '/favorite.html') {\n  function renderFavorites(element, constMarkup) {\n    refs.errorFind.classList.add('notfind-part-hidden');\n    element.insertAdjacentHTML('beforeend', constMarkup);\n  }\n\n  function createMarkupFav({\n    title,\n    img,\n    description,\n    source,\n    category,\n    date,\n  }) {\n    return `<li class=\"gallery__item\">\n    <article class=\"gallery__article\">\n              <div class=\"gallery__thumb\"> <p class=\"gallery__category\">${category}</p>\n                <img class=\"gallery__img\" src=\"${img}\" alt=\"\"/>\n                 <button type=\"button\" class=\"gallery__favorite__btn \">\n                         <span class=\"favorite__btn-span add-favorite-btn is-hidden\">Add to favorite\n                           <svg width='16' height='16' viewBox=\"0 0 37 32\">\n<path fill=\"none\" stroke=\"#4440f7\" style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.667 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n                    </svg> </span>\n                    <span class=\"favorite__btn-span remove-favorite-btn\">Remove from favorite\n                                    <svg width='16' height='16' viewBox=\"0 0 37 32\">\n<path fill=\"#4b48da\" style=\"fill: var(--color1, #4b48da)\" d=\"M9.778 0c-4.908 0-8.889 3.94-8.889 8.8 0 3.924 1.556 13.236 16.868 22.649 0.274 0.167 0.589 0.255 0.91 0.255s0.636-0.088 0.91-0.255c15.312-9.413 16.867-18.725 16.867-22.649 0-4.86-3.98-8.8-8.889-8.8s-8.889 5.333-8.889 5.333-3.98-5.333-8.889-5.333z\"></path>\n          </svg></span>\n                          </button>\n                    </div>\n                    <h3 class=\"gallery__header\">${title}</h3>\n                    <p class=\"gallery__text\">${description}</p>\n                    <div class=\"gallery__item-bottom_wrap\">\n                        <span class=\"gallery__date\">${date}</span>\n                        <a href=\"${source}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"gallery__link\">Read more</a>\n                    </div>\n                </article>\n             </li>`;\n  }\n\n  favoritesInLocalStorage.map(el => {\n    renderFavorites(favoriteGalleryList, createMarkupFav(el));\n  });\n\n  //!!!!Remove favorite ---------------------------------------------------------------RESTORE\n  if (window.location.pathname === '/favorite.html') {\n    favoriteGalleryList.addEventListener('click', onRemoveFavoriteBtn);\n  }\n\n  console.log(favoritesInLocalStorage);\n\n  if (favoritesInLocalStorage === null || favoritesInLocalStorage === []) {\n    console.log('error');\n  }\n\n  function onRemoveFavoriteBtn(e) {\n    const removeBtn = e.target.closest(`.remove-favorite-btn`);\n    const addBtn = removeBtn.parentNode.childNodes[1];\n    console.log();\n\n    const title =\n      removeBtn.parentNode.parentNode.parentNode.childNodes[3].textContent;\n\n    if (!removeBtn) return;\n    if (!favoritesInLocalStorage) return;\n\n    if (!removeBtn.classList.contains('is-hidden')) {\n      removeBtn.classList.add('is-hidden');\n      addBtn.classList.remove('is-hidden');\n    }\n\n    const indexInLocalStorage = favoritesInLocalStorage.findIndex(\n      e => e.title === title\n    );\n\n    console.log(title, indexInLocalStorage);\n\n    // localStorage.removeItem('favoriteNews');\n    favoritesInLocalStorage.splice(indexInLocalStorage, 1);\n\n    localStorage.setItem(\n      'favoritesNews',\n      JSON.stringify(favoritesInLocalStorage)\n    );\n\n    favoriteGalleryList.innerHTML = '';\n    refs.errorFind.classList.remove('notfind-part-hidden');\n\n    favoritesInLocalStorage.map(el => {\n      renderFavorites(favoriteGalleryList, createMarkupFav(el));\n    });\n  }\n}\n"],"names":["$23aE7","parcelRequire","window","addEventListener","event","mqHandler","$krGWQ","refs","errorFind","classList","remove","location","pathname","$f2929da3ca31033d$var$renderFavorites","element","constMarkup","add","insertAdjacentHTML","$f2929da3ca31033d$var$createMarkupFav","title","img","description","source","category","date","$bL5Vt","favoritesInLocalStorage","map","el","favoriteGalleryList","e1","removeBtn","target","closest","addBtn","parentNode","childNodes","console","log","textContent","contains","indexInLocalStorage","findIndex","e","splice","localStorage","setItem","JSON","stringify","innerHTML"],"version":3,"file":"favorite.69876849.js.map"}